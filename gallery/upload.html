<html>
    <head>
        <meta name="generator" content="content" charset='utf-8'/>
        <title>upload</title>
    </head>
    <body>
        <div class="upload">
            <input name="file" type="file" multiple="multiple" id="mf" />
            <input type='button' value="test" @click="upload" />
        </div>

        <script type="text/javascript" src="/statics/scripts/vue/vue.min.js"></script>
        <script type="text/javascript" src="/statics/scripts/axios/axios.min.js"></script>

        <script>

         var up = new Vue({
             el: ".upload",
             methods: {
                 upload: function(){
                     let files = document.getElementById("mf").files;
                     for(let i = 0; i < files.length; i++)
                         {
                             axios.get("/api/getQiniuToken")
                                  .then(res => {
                                      console.log(res.data.content.key);
                                      let data = new FormData();
                                      data.append('token', res.data.content.token);
                                      data.append('file', files[i]);
                                      data.append('key', res.data.content.key);
                                      axios.post("http://upload.qiniup.com/",
                                                 data,{'Content-Type':'multipart/form-data'})
                                           .then(res=>{
                                               console.log(res);
                                               axios.post('/api/addPhoto',{
                                                   key: res.data.key
                                               }).then(r=>{
                                                   console.log(r);
                                               })
                                           })
                                  })
                         }
                 }
             }
         });
        </script>
    </body>
</html>